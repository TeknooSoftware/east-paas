parameters:
  #Admin
  #Admin form types
  teknoo.east.paas.symfony.form_type.account.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\AccountType'
  teknoo.east.paas.symfony.form_type.environment.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\EnvironmentType'
  teknoo.east.paas.symfony.form_type.git_repository.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\GitRepositoryType'
  teknoo.east.paas.symfony.form_type.project.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\ProjectType'
  teknoo.east.paas.symfony.form_type.cluster.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\ClusterType'
  teknoo.east.paas.symfony.form_type.ssh_identity.class: 'Teknoo\East\Paas\Infrastructures\Symfony\Form\Type\SshIdentityType'

  #Class
  teknoo.east.paas.symfony.account.class: 'Teknoo\East\Paas\Object\Account'
  teknoo.east.paas.symfony.environment.class: 'Teknoo\East\Paas\Object\Environment'
  teknoo.east.paas.symfony.git_repository.class: 'Teknoo\East\Paas\Object\GitRepository'
  teknoo.east.paas.symfony.project.class: 'Teknoo\East\Paas\Object\Project'
  teknoo.east.paas.symfony.cluster.class: 'Teknoo\East\Paas\Object\Cluster'
  teknoo.east.paas.symfony.ssh_identity.class: 'Teknoo\East\Paas\Object\SshIdentity'

  teknoo.east.paas.symfony.endpoint.admin.new.project.class: 'Teknoo\East\Paas\EndPoint\NewProjectEndPoint'

services:
  #Forms
  teknoo.east.paas.symfony.form_type.cluster:
    class: '%teknoo.east.paas.symfony.form_type.cluster.class%'
    tags: ['form.type']

  #Accounts
  teknoo.east.paas.symfony.endpoint.admin.delete.account:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.delete.abstract'
    calls:
      - ['setDeletingService', ['@teknoo.east.paas.deleting.account']]
      - ['setLoader', ['@Teknoo\East\Paas\Loader\AccountLoader']]
      - ['setRouter', ['@router']]
    public: true

  teknoo.east.paas.symfony.endpoint.admin.edit.account:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.edit.abstract'
    calls:
      - ['setLoader', ['@Teknoo\East\Paas\Loader\AccountLoader']]
      - ['setWriter', ['@Teknoo\East\Paas\Writer\AccountWriter']]
      - ['setFormClass', ['%teknoo.east.paas.symfony.form_type.account.class%']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.account.edit.file%']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  teknoo.east.paas.symfony.endpoint.admin.list.account:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.list.abstract'
    calls:
      - ['setLoader', ['@Teknoo\East\Paas\Loader\AccountLoader']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.account.list.file%']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  teknoo.east.paas.symfony.endpoint.admin.new.account:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.new.abstract'
    calls:
      - ['setWriter', ['@Teknoo\East\Paas\Writer\AccountWriter']]
      - ['setFormClass', ['%teknoo.east.paas.symfony.form_type.account.class%']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.account.new.file%']]
      - ['setObjectClass', ['%teknoo.east.paas.symfony.account.class%']]
      - ['setRouter', ['@router']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  #Project
  teknoo.east.paas.symfony.endpoint.admin.delete.project:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.delete.abstract'
    calls:
      - ['setDeletingService', ['@teknoo.east.paas.deleting.project']]
      - ['setLoader', ['@Teknoo\East\Paas\Loader\ProjectLoader']]
      - ['setRouter', ['@router']]
    public: true

  teknoo.east.paas.symfony.endpoint.admin.edit.project:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.edit.abstract'
    calls:
      - ['setLoader', ['@Teknoo\East\Paas\Loader\ProjectLoader']]
      - ['setWriter', ['@Teknoo\East\Paas\Writer\ProjectWriter']]
      - ['setFormClass', ['%teknoo.east.paas.symfony.form_type.project.class%']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.project.edit.file%']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  teknoo.east.paas.symfony.endpoint.admin.list.project:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.list.abstract'
    calls:
      - ['setLoader', ['@Teknoo\East\Paas\Loader\ProjectLoader']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.project.list.file%']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  teknoo.east.paas.symfony.endpoint.admin.new.project:
    autowire: false
    autoconfigure: false
    class: '%teknoo.east.paas.symfony.endpoint.admin.new.project.class%'
    calls:
      - ['setFormFactory', ['@form.factory']]
      - ['setWriter', ['@Teknoo\East\Paas\Writer\ProjectWriter']]
      - ['setFormClass', ['%teknoo.east.paas.symfony.form_type.project.class%']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.project.new.file%']]
      - ['setObjectClass', ['%teknoo.east.paas.symfony.project.class%']]
      - ['setRouter', ['@router']]
      - ['setAccountLoader', ['@Teknoo\East\Paas\Loader\AccountLoader']]
      - ['setResponseFactory', ['@Psr\Http\Message\ResponseFactoryInterface']]
      - ['setStreamFactory', ['@Psr\Http\Message\StreamFactoryInterface']]
    tags:
      - { name: "east.endpoint.template" }
    public: true

  #Job
  teknoo.east.paas.symfony.endpoint.admin.delete.job:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.delete.abstract'
    calls:
      - ['setDeletingService', ['@teknoo.east.paas.deleting.job']]
      - ['setLoader', ['@Teknoo\East\Paas\Loader\JobLoader']]
      - ['setRouter', ['@router']]
    public: true

  teknoo.east.paas.symfony.endpoint.admin.list.job:
    autowire: false
    autoconfigure: false
    parent: 'teknoo.east.website.endpoint.admin.list.abstract'
    calls:
      - ['setLoader', ['@Teknoo\East\Paas\Loader\JobLoader']]
      - ['setViewPath', ['%teknoo.east.paas.symfony.view.job.list.file%']]
      - ['setOrder', ['updatedAt', 'DESC']]
    tags:
      - { name: "east.endpoint.template" }
    public: true
